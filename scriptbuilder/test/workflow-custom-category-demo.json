{
  "metadata": {
    "name": "Custom Category Demo",
    "description": "Demonstrates creating a workflow with custom nodes in a NEW category",
    "author": "Test Suite",
    "createdAt": "2025-01-04T12:00:00.000Z",
    "scriptType": "powershell",
    "version": "1.0"
  },
  "workflow": {
    "nodes": [
      {
        "id": "node-1",
        "type": "scriptNode",
        "position": {
          "x": 100,
          "y": 200
        },
        "data": {
          "script": {
            "id": "custom-demo-http-request",
            "name": "HTTP GET Request",
            "category": "Demo Utilities"
          },
          "config": {
            "url": "https://api.example.com/data",
            "variableName": "response",
            "timeout": 30
          }
        }
      },
      {
        "id": "node-2",
        "type": "scriptNode",
        "position": {
          "x": 400,
          "y": 200
        },
        "data": {
          "script": {
            "id": "custom-demo-json-parse",
            "name": "Parse JSON",
            "category": "Demo Utilities"
          },
          "config": {
            "jsonVariable": "response",
            "outputVariable": "data"
          }
        }
      },
      {
        "id": "node-3",
        "type": "scriptNode",
        "position": {
          "x": 700,
          "y": 200
        },
        "data": {
          "script": {
            "id": "custom-demo-format-table",
            "name": "Format as Table",
            "category": "Demo Utilities"
          },
          "config": {
            "dataVariable": "data",
            "properties": "Name,Status,Count"
          }
        }
      }
    ],
    "edges": [
      {
        "id": "edge-1",
        "source": "node-1",
        "target": "node-2",
        "type": "smoothstep"
      },
      {
        "id": "edge-2",
        "source": "node-2",
        "target": "node-3",
        "type": "smoothstep"
      }
    ]
  },
  "requiredCustomNodes": [
    {
      "id": "custom-demo-http-request",
      "name": "HTTP GET Request",
      "category": "Demo Utilities",
      "description": "Make an HTTP GET request and store the response",
      "fields": [
        {
          "key": "url",
          "label": "URL",
          "type": "text",
          "placeholder": "https://api.example.com/endpoint",
          "helperText": "The URL to fetch",
          "defaultValue": ""
        },
        {
          "key": "variableName",
          "label": "Response Variable",
          "type": "text",
          "placeholder": "response",
          "helperText": "Variable to store the response",
          "defaultValue": "response"
        },
        {
          "key": "timeout",
          "label": "Timeout (seconds)",
          "type": "number",
          "placeholder": "30",
          "helperText": "Request timeout in seconds",
          "defaultValue": 30
        }
      ],
      "generators": {
        "powershell": "(config) => `$${config.variableName} = Invoke-RestMethod -Uri \"${config.url}\" -Method Get -TimeoutSec ${config.timeout}`",
        "bash": "(config) => `${config.variableName}=$(curl -s --max-time ${config.timeout} \"${config.url}\")`"
      },
      "metadata": {
        "tags": ["http", "api", "request"],
        "createdAt": "2025-01-04T12:00:00.000Z",
        "updatedAt": "2025-01-04T12:00:00.000Z"
      }
    },
    {
      "id": "custom-demo-json-parse",
      "name": "Parse JSON",
      "category": "Demo Utilities",
      "description": "Parse JSON string into an object",
      "fields": [
        {
          "key": "jsonVariable",
          "label": "JSON Variable",
          "type": "text",
          "placeholder": "jsonString",
          "helperText": "Variable containing JSON",
          "defaultValue": ""
        },
        {
          "key": "outputVariable",
          "label": "Output Variable",
          "type": "text",
          "placeholder": "data",
          "helperText": "Variable to store parsed object",
          "defaultValue": "data"
        }
      ],
      "generators": {
        "powershell": "(config) => `$${config.outputVariable} = $${config.jsonVariable} | ConvertFrom-Json`",
        "bash": "(config) => `${config.outputVariable}=$(echo \"$${config.jsonVariable}\" | jq '.')`"
      },
      "metadata": {
        "tags": ["json", "parse", "data"],
        "createdAt": "2025-01-04T12:00:00.000Z",
        "updatedAt": "2025-01-04T12:00:00.000Z"
      }
    },
    {
      "id": "custom-demo-format-table",
      "name": "Format as Table",
      "category": "Demo Utilities",
      "description": "Display data in a formatted table",
      "fields": [
        {
          "key": "dataVariable",
          "label": "Data Variable",
          "type": "text",
          "placeholder": "data",
          "helperText": "Variable containing data to display",
          "defaultValue": ""
        },
        {
          "key": "properties",
          "label": "Properties to Show",
          "type": "text",
          "placeholder": "Name,Status,Count",
          "helperText": "Comma-separated property names",
          "defaultValue": ""
        }
      ],
      "generators": {
        "powershell": "(config) => `$${config.dataVariable} | Format-Table -Property ${config.properties.split(',').join(', ')} -AutoSize`",
        "bash": "(config) => `echo \"$${config.dataVariable}\" | jq -r '(.[0] | keys_unsorted) as $keys | $keys, map([.[ $keys[] ]])[] | @tsv' | column -t`"
      },
      "metadata": {
        "tags": ["format", "table", "display"],
        "createdAt": "2025-01-04T12:00:00.000Z",
        "updatedAt": "2025-01-04T12:00:00.000Z"
      }
    }
  ]
}
