{
  "id": "custom-test-while-loop",
  "name": "While Loop",
  "category": "Testing",
  "description": "Repeat execution while a condition is true",
  "outputHandles": [
    {
      "id": "loop-body",
      "label": "Loop Body",
      "position": "bottom",
      "color": "#2563eb"
    },
    {
      "id": "after-loop",
      "label": "After Loop",
      "position": "right",
      "color": "#64748b"
    }
  ],
  "fields": [
    {
      "key": "leftOperand",
      "label": "Left Operand",
      "type": "text",
      "placeholder": "$counter",
      "helperText": "Variable or value to test",
      "defaultValue": ""
    },
    {
      "key": "operator",
      "label": "Operator",
      "type": "select",
      "options": [
        { "label": "Less Than (<)", "value": "lt" },
        { "label": "Less or Equal (≤)", "value": "le" },
        { "label": "Greater Than (>)", "value": "gt" },
        { "label": "Greater or Equal (≥)", "value": "ge" },
        { "label": "Equals (=)", "value": "eq" },
        { "label": "Not Equals (≠)", "value": "ne" }
      ],
      "defaultValue": "lt"
    },
    {
      "key": "rightOperand",
      "label": "Right Operand",
      "type": "text",
      "placeholder": "10",
      "helperText": "Value to compare against",
      "defaultValue": ""
    },
    {
      "key": "maxIterations",
      "label": "Max Iterations (Safety)",
      "type": "number",
      "placeholder": "1000",
      "helperText": "Prevent infinite loops",
      "defaultValue": 1000
    }
  ],
  "generators": {
    "powershell": "(config, branches) => { const ops = { eq: '-eq', ne: '-ne', gt: '-gt', ge: '-ge', lt: '-lt', le: '-le' }; const operator = ops[config.operator] || '-lt'; const condition = `${config.leftOperand} ${operator} ${config.rightOperand}`; let code = `$loopCount = 0\\n`; code += `while ((${condition}) -and ($loopCount -lt ${config.maxIterations})) {\\n`; if (branches?.['loop-body']) { code += `    ${branches['loop-body'].replace(/\\n/g, '\\n    ')}\\n`; } code += `    $loopCount++\\n`; code += `}`; return code; }",
    "bash": "(config, branches) => { const ops = { eq: '-eq', ne: '-ne', gt: '-gt', ge: '-ge', lt: '-lt', le: '-le' }; const operator = ops[config.operator] || '-lt'; const condition = `[ ${config.leftOperand} ${operator} ${config.rightOperand} ]`; let code = `loop_count=0\\n`; code += `while ${condition} && [ $loop_count -lt ${config.maxIterations} ]; do\\n`; if (branches?.['loop-body']) { code += `    ${branches['loop-body'].replace(/\\n/g, '\\n    ')}\\n`; } code += `    ((loop_count++))\\n`; code += `done`; return code; }"
  },
  "metadata": {
    "tags": ["control-flow", "loop", "while"],
    "createdAt": "2025-11-03T00:00:00.000Z",
    "updatedAt": "2025-11-03T00:00:00.000Z"
  }
}
